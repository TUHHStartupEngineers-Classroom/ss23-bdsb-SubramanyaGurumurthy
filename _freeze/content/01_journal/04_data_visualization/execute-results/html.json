{
  "hash": "baaba90bc4c8a9abccc1ca18cdf64272",
  "result": {
    "markdown": "---\ntitle: \"Data Visualization\"\nauthor: \"Subramanya Nanjangud Gurumurthy\"\n---\n\n\n\nData visualization in R involves creating visual representations of data to explore patterns, relationships, and trends. R provides several packages and libraries that offer a wide range of tools for data visualization, \nincluding base R graphics, ggplot2, lattice, and plotly.\n\nHere are some key points about data visualization in R:\n\n* Base R Graphics: R's base graphics system provides a simple and versatile way to create plots using functions like plot(), hist(), boxplot(), and more. It offers a good starting point for basic visualizations and allows for customization of plot elements.\n\n* ggplot2: ggplot2 is a popular package for creating publication-quality graphics. It follows the grammar of graphics framework, where you build plots by adding layers and mappings to data. The package provides a consistent and flexible approach to creating visualizations with a wide range of plot types and customization options.\n\n* Lattice: Lattice is another powerful package for creating conditioned plots, which are plots that show relationships between variables conditioned on one or more variables. It offers functions like xyplot(), bwplot(), and levelplot() for creating trellis plots, which are useful for visualizing multivariate data.\n\n* Plotly: Plotly is an interactive data visualization library that allows you to create interactive and web-based plots in R. It provides functions like plot_ly() and ggplotly() for creating interactive plots, including scatter plots, bar charts, heatmaps, and more. Plotly visualizations can be easily embedded in web pages or viewed in a web browser.\n\n* Customization: R provides extensive options for customizing visualizations. You can adjust plot colors, add titles, labels, legends, and annotations, control axis scales and limits, change plot themes, and more. This flexibility allows you to tailor your visualizations to effectively communicate your data.\n\n* Data Transformation: Before visualizing data, you may need to transform and prepare it. R offers powerful data manipulation libraries like dplyr and tidyr, which enable you to reshape, filter, aggregate, and summarize data to create meaningful visualizations.\n\n* Exporting Plots: R allows you to save your plots in various formats, including PNG, PDF, SVG, and more. You can use functions like ggsave() or pdf() to export your plots for use in reports, presentations, or further analysis.\n\n\n# Challenges: \n\nThe challenge deals again with covid data. This time we are using a different up to date data set. I recommend to use the tidyverse to wrangle the data…\n\n```\nlibrary(tidyverse)\ncovid_data_tbl <- read_csv(\"\"https://covid.ourworldindata.org/data/owid-covid-data.csv\"\")\n```\n\n## Challenge 1:\n\nGoal: Map the time course of the cumulative Covid-19 cases! Your plot should look like this:\n\n![Challenge 1](../../plots/Task_4/Challenge1)\n\n\n\nAdding the cases for Europe is optional. You can choose your own color theme, but don’t use the default one. Don’t forget to scale the axis properly. \nThe labels can be added with geom_label() or with geom_label_repel() (from the package ggrepel).\n\n### Solution:\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-1_a37cc327bd7d6d678692b739242959b6'}\n\n```{.r .cell-code}\n##############################################################################################\n#1st task\n##############################################################################################\n\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n#> ✔ dplyr     1.1.2     ✔ readr     2.1.4\n#> ✔ forcats   1.0.0     ✔ stringr   1.5.0\n#> ✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n#> ✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n#> ✔ purrr     1.0.1     \n#> ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n#> ✖ dplyr::filter() masks stats::filter()\n#> ✖ dplyr::lag()    masks stats::lag()\n#> ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n:::\n\n```{.r .cell-code}\nlibrary(lubridate)\n\n# Read the data from the CSV file\ndata <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Rows: 311391 Columns: 67\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr   (4): iso_code, continent, location, tests_units\n#> dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...\n#> date  (1): date\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n# Filter data for the selected countries in Europe and the United States\ncountries <- c(\"Germany\", \"United Kingdom\", \"France\", \"Spain\", \"United States\")\nfiltered_data <- data %>%\n  dplyr::filter(location %in% countries)\n\nfiletered_conti <- data %>%\n  dplyr::filter(location %in% c(\"Europe\"))\n\n# Convert date column to date format\nfiltered_data$date <- ymd(filtered_data$date)\nfiletered_conti$date <- ymd(filetered_conti$date)\n\n# Calculate the cumulative cases\nfiltered_data <- filtered_data %>%\n  group_by(date, location) %>%\n  summarize(cumulative_cases = sum(total_cases, na.rm = TRUE)) %>%\n  ungroup()\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> `summarise()` has grouped output by 'date'. You can override using the\n#> `.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nfiletered_conti <- filetered_conti %>%\n  group_by(date) %>%\n  summarize(cumulative_cases = sum(total_cases, na.rm = TRUE),\n            location = \"Europe\") %>%\n  ungroup()\n\nfiltered_data <- bind_rows(filtered_data, filetered_conti)\n\n\n# Convert total cases to millions\nfiltered_data$cumulative_cases <- filtered_data$cumulative_cases / 1e6\n\n# Filter data until May 2022\nfiltered_data <- filtered_data %>%\n  dplyr::filter(date <= ymd(\"2022-05-01\"))\n\n# Find the highest values of cases for Europe and the United States\nhighest_cases <- filtered_data %>%\n  dplyr::filter(location %in% c(\"Europe\", \"United States\")) %>%\n  group_by(location) %>%\n  dplyr::filter(cumulative_cases == max(cumulative_cases)) %>%\n  ungroup()\n\n# Plot the cumulative cases\nggplot(filtered_data, aes(x = date, y = cumulative_cases, color = location)) +\n  geom_line() +\n  geom_text(data = highest_cases, aes(label = round(cumulative_cases, 2), x = date, y = cumulative_cases),\n            color = \"black\", vjust = -0.5, size = 3) +\n  labs(x = \"Timeline in Months\", y = \"Cumulative Cases (Millions)\", title = \"Covid-19 confirmed cases worldwide\",\n       subtitle = \"Until 06-2022\") +\n  scale_x_date(date_labels = \"%b %Y\", date_breaks = \"1 month\") +\n  scale_y_continuous(labels = function(x) paste0(x, \"M\")) +\n  scale_color_manual(values = c(\"Germany\" = \"blue\", \"United Kingdom\" = \"red\",\n                                \"France\" = \"green\", \"Spain\" = \"orange\",\n                                \"United States\" = \"purple\", \"Europe\" = \"cyan\")) +\n  theme_dark() +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n\n## Challenge 2:\n\nGoal: Visualize the distribution of the mortality rate (deaths / population) with geom_map() (alternatively, you can plot the case-fatality rate (deaths / cases)). \nThe necessary longitudinal and lateral data can be accessed with this function:\n\n```\nworld <- map_data(\"world\")\n```\n\nThis data has also to be put in the map argument of geom_map():\n\n```\nplot_data %>% ggplot( ... ) +\n  geom_map(aes(map_id = ..., ... ), map = world, ... ) +\n  ...\n\n```\n\n![Challenge 1](../../plots/Task_4/Challenge2)\n\n\n### Solution:\n\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-2_74ad1e9f8c23f9fc9ed5f3a3d694f640'}\n\n```{.r .cell-code}\n##############################################################################################\n#2nd task\n##############################################################################################\nlibrary(tidyverse)\nlibrary(scales)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'scales'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following object is masked from 'package:purrr':\n#> \n#>     discard\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following object is masked from 'package:readr':\n#> \n#>     col_factor\n```\n:::\n\n```{.r .cell-code}\n# Read the data from the CSV file\ndata <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Rows: 311391 Columns: 67\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> ── Column specification ────────────────────────────────────────────────────────\n#> Delimiter: \",\"\n#> chr   (4): iso_code, continent, location, tests_units\n#> dbl  (62): total_cases, new_cases, new_cases_smoothed, total_deaths, new_dea...\n#> date  (1): date\n#> \n#> ℹ Use `spec()` to retrieve the full column specification for this data.\n#> ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n# Convert date column to date format\ndata$date <- as.Date(data$date)\n\n# Filter data for the latest date\nlatest_data <- data %>%\n  filter(date == max(date))\n\n# Calculate mortality rate\nlatest_data <- latest_data %>%\n  mutate(mortality_rate = total_deaths / population) %>%\n  select(location, mortality_rate) %>%\n  mutate(location = case_when(\n    \n    location == \"United Kingdom\" ~ \"UK\",\n    location == \"United States\" ~ \"USA\",\n    location == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n    TRUE ~ location\n    \n  )) %>%\n  distinct()\n\nworld <- map_data(\"world\")\n# Perform the left join\nworld <- left_join(world, latest_data, by = c(\"region\" = \"location\"))\n\nggplot(world) +\n  geom_map(aes(map_id = region, fill= mortality_rate), map = world) +\n  expand_limits(x = world$long, y = world$lat) +\n  coord_map()+\n  scale_fill_continuous(labels = percent_format(), name = \"Mortality Rate\")+\n  labs(title=\"Confirmed Covid-19 deaths relative to the size of the Population\",\n       subtitle = \"Around 6.2 Million confirmed COVID-19 deaths worldwide\")\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n### Result from the local computer:\n\nI could not find the reason why the world map produced while rendering qmd page is grayscale. But in the local computer, I was able to get the actual plot in color, which can be seen here:\n\n\n![Confirmed Covid deaths Related to Population in World Map](../../plots/Task_4/Confirmed_covid_deaths_in_World_map)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}