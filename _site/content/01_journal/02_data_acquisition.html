<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Subramanya Nanjangud Gurumurthy">
<title>MyLabJournal - Data Acquisition</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../content/01_journal/01_tidyverse.html">
 <span class="dropdown-text">01 Tidyverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/02_data_acquisition.html">
 <span class="dropdown-text">02 Data Acquisition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/03_data_wrangling.html">
 <span class="dropdown-text">03 Data Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/04_data_visualization.html">
 <span class="dropdown-text">04 Data Visualization</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../content/02_notes/05_class_notes.html">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/03_other/06_links.html">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
<li><a href="#data-acquisition" id="toc-data-acquisition" class="nav-link active" data-scroll-target="#data-acquisition"><span class="toc-section-number">1</span>  Data Acquisition:</a></li>
  <li>
<a href="#challenge-1" id="toc-challenge-1" class="nav-link" data-scroll-target="#challenge-1"><span class="toc-section-number">2</span>  Challenge 1:</a>
  <ul class="collapse">
<li><a href="#solution-explaination" id="toc-solution-explaination" class="nav-link" data-scroll-target="#solution-explaination"><span class="toc-section-number">2.1</span>  Solution Explaination:</a></li>
  <li><a href="#result-plot-for-the-challenge" id="toc-result-plot-for-the-challenge" class="nav-link" data-scroll-target="#result-plot-for-the-challenge"><span class="toc-section-number">2.2</span>  Result plot for the challenge:</a></li>
  </ul>
</li>
  <li>
<a href="#challenge-2" id="toc-challenge-2" class="nav-link" data-scroll-target="#challenge-2"><span class="toc-section-number">3</span>  Challenge 2:</a>
  <ul class="collapse">
<li><a href="#steps-involved-in-solution" id="toc-steps-involved-in-solution" class="nav-link" data-scroll-target="#steps-involved-in-solution"><span class="toc-section-number">3.1</span>  Steps involved in Solution:</a></li>
  <li><a href="#result-plot" id="toc-result-plot" class="nav-link" data-scroll-target="#result-plot"><span class="toc-section-number">3.2</span>  Result Plot:</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Data Acquisition</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Subramanya Nanjangud Gurumurthy </p>
          </div>
  </div>
    
  
    
  </div>
  

</header><section id="data-acquisition" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Data Acquisition:</h1>
<p>Data acquisition in R refers to the process of obtaining data from various sources and loading it into R for analysis and manipulation. R provides several functions and packages that facilitate data acquisition from different types of sources, such as files, databases, web APIs, and more. Here is an introduction to some common methods of data acquisition in R:</p>
<p>Reading from Files:</p>
<ul>
<li>read.csv(): Reads data from a CSV (Comma-Separated Values) file.</li>
<li>read.table(): Reads data from a delimited text file.</li>
<li>read_excel(): Reads data from an Excel file.</li>
<li>readr package: Provides efficient functions for reading various file formats.</li>
</ul>
<p>Connecting to Databases:</p>
<ul>
<li>DBI package: Provides a consistent interface for connecting to and querying databases.</li>
<li>dbConnect(): Establishes a connection to a database.</li>
<li>dbGetQuery(): Executes a SQL query and retrieves data from a database.</li>
</ul>
<p>Web Scraping:</p>
<ul>
<li>rvest package: Allows scraping data from websites using CSS selectors or XPath expressions.</li>
<li>httr package: Provides functions for making HTTP requests and retrieving web content.</li>
</ul>
<p>Web APIs:</p>
<ul>
<li>httr package: Supports interacting with web APIs using HTTP requests (GET, POST, etc.).</li>
<li>jsonlite package: Enables parsing and manipulating data in JSON format.</li>
</ul>
<p>Other Sources:</p>
<ul>
<li>readr and haven packages: Support reading data from SAS, SPSS, and Stata files.</li>
<li>RODBC package: Connects to ODBC-compliant databases.</li>
</ul>
<p>These are just a few examples of data acquisition methods in R. Depending on your specific needs, there may be other packages and functions available to acquire data from specific sources or formats. The choice of method depends on the type of data, its source, and the desired data format for further analysis in R.</p>
</section><section id="challenge-1" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Challenge 1:</h1>
<p>Get some data via an API. There are millions of providers, that offer API access for free and have good documentation about how to query their service. You just have to google them. You can use whatever service you want. For example, you can get data about your listening history (spotify), get data about flights (skyscanner) or just check the weather forecast. Print the data in a readable format, e.g.&nbsp;a table if you want, you could also plot it.</p>
<p>In this task I have used weather website <a href="https://api.open-meteo.com/v1/">Open-Meteo</a> for solving the task. I have considered Temperature, Relative Humidity, Rain, Precipitation Probability as parameters for the location Hamburg.</p>
<section id="solution-explaination" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="solution-explaination">
<span class="header-section-number">2.1</span> Solution Explaination:</h2>
<ul>
<li><p>The code loads the necessary packages: httr for making HTTP requests and jsonlite for parsing JSON data.</p></li>
<li><p>The desired location, “Hamburg,” is set.</p></li>
<li><p>The API request URL is constructed with the latitude, longitude, and the specific weather parameters to retrieve (temperature, relative humidity, precipitation probability, and rain).</p></li>
<li><p>The GET() function from httr sends the API request and retrieves the response.</p></li>
<li><p>The code checks if the request was successful by verifying the status code (200).</p></li>
<li><p>If the request was successful, the JSON response is parsed using fromJSON() from jsonlite. The flatten = TRUE argument ensures a flat structure for easier data extraction.</p></li>
<li><p>The relevant weather data (temperature, time, relative humidity, rain, and precipitation probability) is extracted from the parsed JSON.</p></li>
<li><p>The code then prints the location and the units of measurement for each weather parameter.</p></li>
<li><p>The extracted data is stored in a data frame (df).</p></li>
<li><p>Finally, the data frame is printed to display the weather data.</p></li>
</ul>
<p>The complete code:</p>
<div class="cell" data-hash="02_data_acquisition_cache/html/unnamed-chunk-1_b75e39cac53782171cafdec72ddfe6fe">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="do">##############################################################################################</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">#1st task</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="do">##############################################################################################</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(jsonlite)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Set the desired location</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>location <span class="ot">&lt;-</span> <span class="st">"Hamburg"</span></span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co">#the API request URL</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>url <span class="ot">&lt;-</span> <span class="st">"https://api.open-meteo.com/v1/forecast?latitude=48.75&amp;longitude=9.10&amp;hourly=temperature_2m,relativehumidity_2m,precipitation_probability,rain"</span></span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co"># Send the API request and retrieve the response</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>response <span class="ot">&lt;-</span> <span class="fu">GET</span>(url)</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co"># Check if the request was successful (status code 200)</span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="cf">if</span> (<span class="fu">status_code</span>(response) <span class="sc">==</span> <span class="dv">200</span>) {</span>
<span id="cb1-20"><a href="#cb1-20"></a>  <span class="co"># Parse the JSON response</span></span>
<span id="cb1-21"><a href="#cb1-21"></a>  data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">content</span>(response, <span class="st">"text"</span>), <span class="at">flatten =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-22"><a href="#cb1-22"></a>  </span>
<span id="cb1-23"><a href="#cb1-23"></a>  <span class="co"># Extract the relevant data</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>  temperature <span class="ot">&lt;-</span> data<span class="sc">$</span>hourly<span class="sc">$</span>temperature_2m</span>
<span id="cb1-25"><a href="#cb1-25"></a>  time <span class="ot">&lt;-</span> data<span class="sc">$</span>hourly<span class="sc">$</span>time</span>
<span id="cb1-26"><a href="#cb1-26"></a>  relativehumidity <span class="ot">&lt;-</span> data<span class="sc">$</span>hourly<span class="sc">$</span>relativehumidity_2m</span>
<span id="cb1-27"><a href="#cb1-27"></a>  rain <span class="ot">&lt;-</span> data<span class="sc">$</span>hourly<span class="sc">$</span>rain</span>
<span id="cb1-28"><a href="#cb1-28"></a>  precip_probability <span class="ot">&lt;-</span> data<span class="sc">$</span>hourly<span class="sc">$</span>precipitation_probability</span>
<span id="cb1-29"><a href="#cb1-29"></a>  </span>
<span id="cb1-30"><a href="#cb1-30"></a>  <span class="co"># Print the weather data</span></span>
<span id="cb1-31"><a href="#cb1-31"></a>  <span class="fu">cat</span>(<span class="st">"Weather in"</span>, location, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-32"><a href="#cb1-32"></a>  <span class="fu">cat</span>(<span class="st">"Units:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-33"><a href="#cb1-33"></a>  <span class="fu">cat</span>(<span class="st">"Temperature:"</span>,<span class="st">"°C</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-34"><a href="#cb1-34"></a>  <span class="fu">cat</span>(<span class="st">"Relative Humidity:"</span>,<span class="st">"%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-35"><a href="#cb1-35"></a>  <span class="fu">cat</span>(<span class="st">"Precipitation:"</span>, <span class="st">"mm</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-36"><a href="#cb1-36"></a>  <span class="fu">cat</span>(<span class="st">"Rain:"</span>,<span class="st">"mm</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-37"><a href="#cb1-37"></a>  </span>
<span id="cb1-38"><a href="#cb1-38"></a>  df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"Date_T_Time"</span> <span class="ot">=</span> time, <span class="st">"Temperature"</span> <span class="ot">=</span> temperature, <span class="st">"Relative_Humidity"</span> <span class="ot">=</span> relativehumidity,</span>
<span id="cb1-39"><a href="#cb1-39"></a>                   <span class="st">"Rain"</span> <span class="ot">=</span> rain, <span class="st">"Precipitation_Probability"</span> <span class="ot">=</span> precip_probability)</span>
<span id="cb1-40"><a href="#cb1-40"></a>  </span>
<span id="cb1-41"><a href="#cb1-41"></a>  <span class="fu">print</span>(<span class="fu">head</span>(df, <span class="dv">25</span>))   </span>
<span id="cb1-42"><a href="#cb1-42"></a>  <span class="fu">plot</span>(df)</span>
<span id="cb1-43"><a href="#cb1-43"></a>  </span>
<span id="cb1-44"><a href="#cb1-44"></a>} <span class="cf">else</span> {</span>
<span id="cb1-45"><a href="#cb1-45"></a>  <span class="fu">cat</span>(<span class="st">"Error:"</span>, <span class="fu">status_code</span>(response), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb1-46"><a href="#cb1-46"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; Weather in Hamburg 
#&gt; Units:
#&gt; Temperature: °C
#&gt; Relative Humidity: %
#&gt; Precipitation: mm
#&gt; Rain: mm
#&gt;         Date_T_Time Temperature Relative_Humidity Rain
#&gt; 1  2023-05-20T00:00        10.3                79    0
#&gt; 2  2023-05-20T01:00        10.5                82    0
#&gt; 3  2023-05-20T02:00         9.8                87    0
#&gt; 4  2023-05-20T03:00         9.7                87    0
#&gt; 5  2023-05-20T04:00         9.6                89    0
#&gt; 6  2023-05-20T05:00        10.3                87    0
#&gt; 7  2023-05-20T06:00        11.2                85    0
#&gt; 8  2023-05-20T07:00        12.8                80    0
#&gt; 9  2023-05-20T08:00        14.3                72    0
#&gt; 10 2023-05-20T09:00        15.4                68    0
#&gt; 11 2023-05-20T10:00        16.6                64    0
#&gt; 12 2023-05-20T11:00        18.5                56    0
#&gt; 13 2023-05-20T12:00        19.7                50    0
#&gt; 14 2023-05-20T13:00        20.6                47    0
#&gt; 15 2023-05-20T14:00        20.0                50    0
#&gt; 16 2023-05-20T15:00        21.4                46    0
#&gt; 17 2023-05-20T16:00        21.1                49    0
#&gt; 18 2023-05-20T17:00        20.6                56    0
#&gt; 19 2023-05-20T18:00        19.8                65    0
#&gt; 20 2023-05-20T19:00        17.3                71    0
#&gt; 21 2023-05-20T20:00        16.2                74    0
#&gt; 22 2023-05-20T21:00        15.9                75    0
#&gt; 23 2023-05-20T22:00        15.7                74    0
#&gt; 24 2023-05-20T23:00        15.0                77    0
#&gt; 25 2023-05-21T00:00        14.6                79    0
#&gt;    Precipitation_Probability
#&gt; 1                          0
#&gt; 2                          0
#&gt; 3                          0
#&gt; 4                          0
#&gt; 5                          0
#&gt; 6                          0
#&gt; 7                          0
#&gt; 8                          0
#&gt; 9                          0
#&gt; 10                         0
#&gt; 11                         2
#&gt; 12                         4
#&gt; 13                         6
#&gt; 14                         4
#&gt; 15                         2
#&gt; 16                         0
#&gt; 17                         6
#&gt; 18                        13
#&gt; 19                        19
#&gt; 20                        13
#&gt; 21                         6
#&gt; 22                         0
#&gt; 23                         0
#&gt; 24                         0
#&gt; 25                         0</code></pre>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="result-plot-for-the-challenge" class="level2" data-number="2.2"><h2 data-number="2.2" class="anchored" data-anchor-id="result-plot-for-the-challenge">
<span class="header-section-number">2.2</span> Result plot for the challenge:</h2>
<p>Even though the program can print a lot of data, for sample I am plotting 15 values from the table for reference in case if online running do not work.</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 16%">
<col style="width: 20%">
<col style="width: 6%">
<col style="width: 30%">
</colgroup>
<thead><tr class="header">
<th style="text-align: center;">Date and Time</th>
<th style="text-align: center;">Temperature</th>
<th style="text-align: center;">Relative Humidity</th>
<th style="text-align: center;">Rain</th>
<th style="text-align: center;">Precipitation Probability</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">2023-05-20T00:00</td>
<td style="text-align: center;">10.3</td>
<td style="text-align: center;">79</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T01:00</td>
<td style="text-align: center;">10.5</td>
<td style="text-align: center;">82</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T02:00</td>
<td style="text-align: center;">9.8</td>
<td style="text-align: center;">87</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T03:00</td>
<td style="text-align: center;">9.7</td>
<td style="text-align: center;">87</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T04:00</td>
<td style="text-align: center;">9.6</td>
<td style="text-align: center;">89</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T05:00</td>
<td style="text-align: center;">10.3</td>
<td style="text-align: center;">87</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T06:00</td>
<td style="text-align: center;">11.2</td>
<td style="text-align: center;">85</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T07:00</td>
<td style="text-align: center;">12.8</td>
<td style="text-align: center;">80</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T08:00</td>
<td style="text-align: center;">14.3</td>
<td style="text-align: center;">72</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T09:00</td>
<td style="text-align: center;">15.4</td>
<td style="text-align: center;">68</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T10:00</td>
<td style="text-align: center;">16.6</td>
<td style="text-align: center;">64</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T11:00</td>
<td style="text-align: center;">18.5</td>
<td style="text-align: center;">56</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T12:00</td>
<td style="text-align: center;">19.7</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">6</td>
</tr>
<tr class="even">
<td style="text-align: center;">2023-05-20T13:00</td>
<td style="text-align: center;">20.6</td>
<td style="text-align: center;">47</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">4</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2023-05-20T14:00</td>
<td style="text-align: center;">20.0</td>
<td style="text-align: center;">50</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">2</td>
</tr>
</tbody>
</table></section></section><section id="challenge-2" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Challenge 2:</h1>
<p>Scrape one of the competitor websites of canyon (either https://www.rosebikes.de/ or https://www.radon-bikes.de) and create a small database. The database should contain the model names and prices for at least one category. Use the selectorgadget to get a good understanding of the website structure, it is really helpful. After scraping your data, convert it to a readable format. Prices should be in a numeric format without any other letters or symbols. Also check if the prices are reasonable.</p>
<section id="steps-involved-in-solution" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="steps-involved-in-solution">
<span class="header-section-number">3.1</span> Steps involved in Solution:</h2>
<ul>
<li>Load the necessary libraries: rvest and dplyr.</li>
<li>Define the URL of the competitor website.</li>
<li>Read the HTML content of the website using read_html().</li>
<li>Scrape the model names by selecting the appropriate HTML elements using CSS selectors (html_nodes()), extracting the text (html_text()), and trimming white spaces (trimws()).</li>
<li>Scrape the prices by following a similar process as step 4, but also perform additional data cleaning steps such as removing non-numeric characters, replacing commas with dots, and converting the values to numeric.</li>
<li>Define a reasonable price range (maximum price).</li>
<li>Filter out rows with prices exceeding the reasonable price range.</li>
<li>Create a new variable indicating whether the price is reasonable or not.</li>
<li>Iterate over the prices and reasonability using a loop, printing the price and its reasonability.</li>
<li>Create a data frame (data) with the scraped model names, prices, and reasonability.</li>
<li>Generate a bar plot of the prices by model and reasonability, where reasonable prices are shown in green and unreasonable prices are shown in red.</li>
<li>Print the first 10 rows of the data frame.</li>
</ul>
<p>The complete code:</p>
<div class="cell" data-hash="02_data_acquisition_cache/html/unnamed-chunk-2_da86a69ad64d178687f5e35b6e5d6020">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="do">##############################################################################################</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">#2nd task</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="do">##############################################################################################</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">library</span>(rvest)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># Define the URL of the competitor website</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.radon-bikes.de/en/mountainbike/hardtail/bikegrid/"</span></span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co"># Read the HTML content of the website</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb3-12"><a href="#cb3-12"></a></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="co"># Scrape the model names and prices</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>model_names <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="fu">html_nodes</span>(<span class="st">".m-bikegrid__info .a-heading--small"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>  <span class="fu">html_text</span>()<span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>  <span class="fu">trimws</span>()</span>
<span id="cb3-18"><a href="#cb3-18"></a></span>
<span id="cb3-19"><a href="#cb3-19"></a>prices <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span></span>
<span id="cb3-20"><a href="#cb3-20"></a>  <span class="fu">html_nodes</span>(<span class="st">".m-bikegrid__price--active"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-21"><a href="#cb3-21"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-22"><a href="#cb3-22"></a>  <span class="fu">trimws</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-23"><a href="#cb3-23"></a>  <span class="fu">gsub</span>(<span class="st">"[^0-9.,]"</span>, <span class="st">""</span>, .) <span class="sc">%&gt;%</span></span>
<span id="cb3-24"><a href="#cb3-24"></a>  <span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">"."</span>, .) <span class="sc">%&gt;%</span></span>
<span id="cb3-25"><a href="#cb3-25"></a>  <span class="fu">as.numeric</span>()</span>
<span id="cb3-26"><a href="#cb3-26"></a>  </span>
<span id="cb3-27"><a href="#cb3-27"></a>prices <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(prices)</span>
<span id="cb3-28"><a href="#cb3-28"></a></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co"># Define the reasonable price range</span></span>
<span id="cb3-30"><a href="#cb3-30"></a>max_price <span class="ot">&lt;-</span> <span class="dv">2000</span>  <span class="co"># Maximum reasonable price</span></span>
<span id="cb3-31"><a href="#cb3-31"></a></span>
<span id="cb3-32"><a href="#cb3-32"></a><span class="co"># Filter out rows with unreasonable prices</span></span>
<span id="cb3-33"><a href="#cb3-33"></a>reasonable_prices <span class="ot">&lt;-</span> prices <span class="sc">&lt;=</span> max_price</span>
<span id="cb3-34"><a href="#cb3-34"></a></span>
<span id="cb3-35"><a href="#cb3-35"></a>reasonable_list <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(reasonable_prices, <span class="st">"Reasonable"</span>, <span class="st">"Not Reasonable"</span>)</span>
<span id="cb3-36"><a href="#cb3-36"></a></span>
<span id="cb3-37"><a href="#cb3-37"></a><span class="co"># uncomment this block if you want to print the reasonability individually</span></span>
<span id="cb3-38"><a href="#cb3-38"></a><span class="co">#for (i in seq_along(prices)) {</span></span>
<span id="cb3-39"><a href="#cb3-39"></a><span class="co">#  price &lt;- prices[i]</span></span>
<span id="cb3-40"><a href="#cb3-40"></a><span class="co">#  reasonable &lt;- ifelse(reasonable_prices[i], "Reasonable", "Not Reasonable")</span></span>
<span id="cb3-41"><a href="#cb3-41"></a><span class="co">#  print(paste("Price:", price, "| Reasonable:", reasonable))</span></span>
<span id="cb3-42"><a href="#cb3-42"></a><span class="co">#}</span></span>
<span id="cb3-43"><a href="#cb3-43"></a></span>
<span id="cb3-44"><a href="#cb3-44"></a><span class="co"># # Create a data frame with the scraped data</span></span>
<span id="cb3-45"><a href="#cb3-45"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Model =</span> model_names, <span class="at">Price =</span> prices, <span class="at">Reasonability =</span> reasonable_list)</span>
<span id="cb3-46"><a href="#cb3-46"></a></span>
<span id="cb3-47"><a href="#cb3-47"></a><span class="fu">barplot</span>(<span class="fu">as.numeric</span>(data<span class="sc">$</span>Price), <span class="at">names.arg =</span> data<span class="sc">$</span>Model, <span class="at">col =</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>Reasonability <span class="sc">==</span> <span class="st">"Reasonable"</span>, <span class="st">"green"</span>, <span class="st">"red"</span>),</span>
<span id="cb3-48"><a href="#cb3-48"></a>        <span class="at">xlab =</span> <span class="st">"Model"</span>, <span class="at">ylab =</span> <span class="st">"Price"</span>, <span class="at">main =</span> <span class="st">"Price by Model and Reasonability"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="02_data_acquisition_files/figure-html/unnamed-chunk-2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="02_data_acquisition_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Print the first 10 rows of the data frame</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">print</span>(<span class="fu">head</span>(data, <span class="at">n =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                Model   Price  Reasonability
#&gt; 1        JEALOUS 8.0 2520.17 Not Reasonable
#&gt; 2        JEALOUS 9.0 2856.30 Not Reasonable
#&gt; 3       JEALOUS 10.0 4200.84 Not Reasonable
#&gt; 4    JEALOUS 10.0 EA 5461.34 Not Reasonable
#&gt; 5    JEALOUS 10.0 EA 3780.67 Not Reasonable
#&gt; 6     JEALOUS AL 8.0 1007.56     Reasonable
#&gt; 7  JEALOUS AL 8.0 HD 1427.73     Reasonable
#&gt; 8     JEALOUS AL 9.0 1511.76     Reasonable
#&gt; 9     JEALOUS AL 9.0 1511.76     Reasonable
#&gt; 10   JEALOUS AL 10.0 1679.83     Reasonable</code></pre>
</div>
</div>
</section><section id="result-plot" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="result-plot">
<span class="header-section-number">3.2</span> Result Plot:</h2>
<p>The result that was obtained from the local machine. The color of the reasonability has been changed from green, red to blue and yellow for the diffrerentiation:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="../../plots/Task_2/Price_by_model_and_Reasonability.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Price by Model and Reasonability"><img src="../../plots/Task_2/Price_by_model_and_Reasonability.png" class="img-fluid figure-img"></a></p>
<p></p><figcaption class="figure-caption">Price by Model and Reasonability</figcaption><p></p>
</figure>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"openEffect":"zoom","selector":".lightbox","descPosition":"bottom","closeEffect":"zoom","loop":true});</script>


</body></html>