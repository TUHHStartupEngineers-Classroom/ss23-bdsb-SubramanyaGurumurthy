<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Subramanya Nanjangud Gurumurthy">
<title>MyLabJournal - Data Wrangling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../assets/icons/favicon.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MyLabJournal</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-journal" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Journal</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-journal">
<li>
    <a class="dropdown-item" href="../../content/01_journal/01_tidyverse.html">
 <span class="dropdown-text">01 Tidyverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/02_data_acquisition.html">
 <span class="dropdown-text">02 Data Acquisition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/03_data_wrangling.html">
 <span class="dropdown-text">03 Data Wrangling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../content/01_journal/04_data_visualization.html">
 <span class="dropdown-text">04 Data Visualization</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item">
    <a class="nav-link" href="../../content/02_notes/05_class_notes.html">
 <span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../content/03_other/06_links.html">
 <span class="menu-text">Links</span></a>
  </li>  
</ul>
<div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
<li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link active" data-scroll-target="#data-wrangling"><span class="toc-section-number">1</span>  Data Wrangling</a></li>
  <li>
<a href="#challenge" id="toc-challenge" class="nav-link" data-scroll-target="#challenge"><span class="toc-section-number">2</span>  Challenge:</a>
  <ul class="collapse">
<li><a href="#solution" id="toc-solution" class="nav-link" data-scroll-target="#solution"><span class="toc-section-number">2.1</span>  Solution:</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">Data Wrangling</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Subramanya Nanjangud Gurumurthy </p>
          </div>
  </div>
    
  
    
  </div>
  

</header><section id="data-wrangling" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Data Wrangling</h1>
<p>Data wrangling in R refers to the process of transforming and manipulating data to make it more suitable for analysis or further processing. It involves tasks such as cleaning, reshaping, filtering, aggregating, and merging datasets. Data wrangling is an essential step in data analysis and is often performed using packages like dplyr and tidyr within the tidyverse ecosystem.</p>
<p>Here are some key concepts and techniques commonly used in data wrangling in R:</p>
<ul>
<li><p>Data Import: Reading data from various file formats such as CSV, Excel, or databases into R using functions like read_csv(), read_excel(), or read.table().</p></li>
<li><p>Data Cleaning: Handling missing values (na.omit(), complete.cases()), removing duplicates (distinct()), dealing with outliers, and correcting data inconsistencies.</p></li>
<li><p>Data Transformation: Modifying data structure and content using functions like mutate(), select(), filter(), and arrange() from the dplyr package. Renaming variables, creating new variables, or recoding values are common transformation tasks.</p></li>
<li><p>Reshaping Data: Converting data between wide and long formats using functions like pivot_longer() and pivot_wider() from the tidyr package. This is useful when dealing with data that needs to be organized differently for analysis or visualization.</p></li>
<li><p>Aggregating Data: Summarizing data by groups using functions like group_by() and summarize(). Calculating group-level statistics, such as means, counts, or proportions, is common in data analysis.</p></li>
<li><p>Merging and Joining Data: Combining multiple datasets based on common variables using functions like merge() or left_join(). This allows you to bring together different pieces of information from different sources.</p></li>
<li><p>Handling Dates and Times: Manipulating and extracting information from date and time variables using functions from packages like lubridate.</p></li>
<li><p>Data Type Conversion: Converting data types to the appropriate format, such as converting character variables to factors or numeric variables to dates.</p></li>
</ul>
<p>Overall, data wrangling in R involves a combination of functions and techniques to transform, clean, and reshape data in preparation for analysis. It requires a good understanding of the dataset and the available tools in R to effectively manage and manipulate data.</p>
</section><section id="challenge" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Challenge:</h1>
<p>Patents play a critical role in incentivizing innovation, without which we wouldn’t have much of the technology we rely on everyday. What does your iPhone, Google’s PageRank algorithm, and a butter substitute called Smart Balance all have in common?</p>
<p>…They all probably wouldn’t be here if not for patents. A patent provides its owner with the ability to make money off of something that they invented, without having to worry about someone else copying their technology. Think Apple would spend millions of dollars developing the iPhone if Samsung could just come along and rip it off? Probably not.</p>
<p>Patents offer a great opportunity for data analysis, because the data is public. PatentsView is one of USPTO’s (United States Patent and Trademark Office) new initiatives intended to increase the usability and value of patent data.</p>
<p>Please note, that the patent data provided by the USPTO is a very large data set that might overload your computer power. Therefore, we also provide a reduced data set that is filtered to the year 2014 only with less columns, so you are able to complete the task, if your computer can’t process the large original data file.</p>
<section id="solution" class="level2" data-number="2.1"><h2 data-number="2.1" class="anchored" data-anchor-id="solution">
<span class="header-section-number">2.1</span> Solution:</h2>
<p>In this challenge I have used reduced dataset for the year 2014.</p>
<ul>
<li>Patent Dominance: What US company / corporation has the most patents? List the 10 US companies with the most assigned/granted patents.</li>
</ul>
<div class="cell" data-hash="03_data_wrangling_cache/html/unnamed-chunk-1_a2d7adfd6919a96e3f373f6729d4c9ea">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="do">##############################################################################################</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co">#1st task</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="do">##############################################################################################</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">#using data.table</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># Step 1: Read the asignee.tsv file</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>asignee_dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/assignee.tsv"</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co"># Step 2: Read the patent_asignee.tsv file</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>patent_asignee_dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/patent_assignee.tsv"</span>)</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co"># Merge the data.tables based on assignee_id</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>merged_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(asignee_dt, patent_asignee_dt, <span class="at">by.x =</span> <span class="st">"id"</span>, <span class="at">by.y =</span> <span class="st">"assignee_id"</span>)</span>
<span id="cb1-16"><a href="#cb1-16"></a></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co"># Count the number of patents for each organization</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>patent_counts <span class="ot">&lt;-</span> merged_dt[, .N, by <span class="ot">=</span> organization]</span>
<span id="cb1-19"><a href="#cb1-19"></a></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="co"># Sort the patent counts in descending order</span></span>
<span id="cb1-21"><a href="#cb1-21"></a>sorted_counts <span class="ot">&lt;-</span> patent_counts[<span class="fu">order</span>(<span class="sc">-</span>N)]</span>
<span id="cb1-22"><a href="#cb1-22"></a></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="co"># Select the top 10 companies with the most patents</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>top_10_companies <span class="ot">&lt;-</span> sorted_counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a><span class="co"># Print the result</span></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="fu">print</span>(top_10_companies)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                                    organization    N
#&gt;  1: International Business Machines Corporation 7547
#&gt;  2:               Samsung Electronics Co., Ltd. 5835
#&gt;  3:                      Canon Kabushiki Kaisha 4099
#&gt;  4:                            Sony Corporation 3326
#&gt;  5:                       Microsoft Corporation 3165
#&gt;  6:                                 Google Inc. 2668
#&gt;  7:                    Kabushiki Kaisha Toshiba 2656
#&gt;  8:                       QUALCOMM Incorporated 2597
#&gt;  9:                         LG Electronics Inc. 2459
#&gt; 10:                                        &lt;NA&gt; 2377</code></pre>
</div>
</div>
<ul>
<li>Recent patent activity: What US company had the most patents granted in August 2014? List the top 10 companies with the most new granted patents for August 2014.</li>
</ul>
<div class="cell" data-hash="03_data_wrangling_cache/html/unnamed-chunk-2_b2864bceb27e8f56fdc9924afc78992c">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="do">##############################################################################################</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co"># 2nd task:</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="do">##############################################################################################</span></span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">library</span>(data.table)</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># Read the files into data.tables</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>asignee_dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/assignee.tsv"</span>)</span>
<span id="cb3-9"><a href="#cb3-9"></a>patent_asignee_dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/patent_assignee.tsv"</span>)</span>
<span id="cb3-10"><a href="#cb3-10"></a>patent_dt <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/patent.tsv"</span>)</span>
<span id="cb3-11"><a href="#cb3-11"></a></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co"># Merge the data.tables based on assignee_id</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>merged_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(<span class="fu">merge</span>(asignee_dt, patent_asignee_dt, <span class="at">by.x =</span> <span class="st">"id"</span>, <span class="at">by.y =</span> <span class="st">"assignee_id"</span>), patent_dt, <span class="at">by.x =</span> <span class="st">"patent_id"</span>, <span class="at">by.y =</span> <span class="st">"id"</span>)</span>
<span id="cb3-14"><a href="#cb3-14"></a></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co"># Filter the merged data.table for patents granted in August 2014</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>august_2014_patents <span class="ot">&lt;-</span> merged_dt[lubridate<span class="sc">::</span><span class="fu">year</span>(date) <span class="sc">==</span> <span class="dv">2014</span> <span class="sc">&amp;</span> lubridate<span class="sc">::</span><span class="fu">month</span>(date) <span class="sc">==</span> <span class="dv">8</span>]</span>
<span id="cb3-17"><a href="#cb3-17"></a></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co"># Count the number of patents for each organization in August 2014</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>patent_counts <span class="ot">&lt;-</span> august_2014_patents[, .N, by <span class="ot">=</span> organization]</span>
<span id="cb3-20"><a href="#cb3-20"></a></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="co"># Order the counts in descending order</span></span>
<span id="cb3-22"><a href="#cb3-22"></a>ordered_counts <span class="ot">&lt;-</span> patent_counts[<span class="fu">order</span>(<span class="sc">-</span>N)]</span>
<span id="cb3-23"><a href="#cb3-23"></a></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="co"># Select the top 10 companies with the most new granted patents in August 2014</span></span>
<span id="cb3-25"><a href="#cb3-25"></a>top_10_companies_in_august <span class="ot">&lt;-</span> ordered_counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb3-26"><a href="#cb3-26"></a></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co"># Print the result</span></span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="fu">print</span>(top_10_companies_in_august)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt;                                    organization   N
#&gt;  1: International Business Machines Corporation 718
#&gt;  2:               Samsung Electronics Co., Ltd. 524
#&gt;  3:                      Canon Kabushiki Kaisha 361
#&gt;  4:                       Microsoft Corporation 337
#&gt;  5:                            Sony Corporation 269
#&gt;  6:                                 Google Inc. 240
#&gt;  7:                       QUALCOMM Incorporated 223
#&gt;  8:                                  Apple Inc. 222
#&gt;  9:                    Kabushiki Kaisha Toshiba 213
#&gt; 10:                         LG Electronics Inc. 211</code></pre>
</div>
</div>
<ul>
<li>Innovation in Tech: What is the most innovative tech sector? For the top 10 companies (worldwide) with the most patents, what are the top 5 USPTO tech main classes?</li>
</ul>
<div class="cell" data-hash="03_data_wrangling_cache/html/unnamed-chunk-3_3f7966b6df25300409f1f6204a7b3566">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="do">##############################################################################################</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#3rd task</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="do">##############################################################################################</span></span>
<span id="cb5-4"><a href="#cb5-4"></a></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">library</span>(data.table)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># Read the files into data tables</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>asignee <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/assignee.tsv"</span>)</span>
<span id="cb5-9"><a href="#cb5-9"></a>patent_asignee <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/patent_assignee.tsv"</span>)</span>
<span id="cb5-10"><a href="#cb5-10"></a>uspc <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">"C:/Users/LENOVO/OneDrive/Desktop/business_module/ss23-bdsb-SubramanyaGurumurthy/Patent_data_reduced/uspc.tsv"</span>)</span>
<span id="cb5-11"><a href="#cb5-11"></a></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="co"># Merge the data tables</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>merged_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(asignee, patent_asignee, <span class="at">by.x =</span> <span class="st">"id"</span>, <span class="at">by.y =</span> <span class="st">"assignee_id"</span>)</span>
<span id="cb5-14"><a href="#cb5-14"></a>merged_dt <span class="ot">&lt;-</span> <span class="fu">merge</span>(merged_dt, uspc, <span class="at">by =</span> <span class="st">"patent_id"</span>)</span>
<span id="cb5-15"><a href="#cb5-15"></a></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co"># Count the number of patents per company</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>patents_per_company <span class="ot">&lt;-</span> merged_dt[, .(<span class="at">patent_count =</span> .N), by <span class="ot">=</span> organization]</span>
<span id="cb5-18"><a href="#cb5-18"></a>top_10_companies <span class="ot">&lt;-</span> patents_per_company[<span class="fu">order</span>(<span class="sc">-</span>patent_count)][<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb5-19"><a href="#cb5-19"></a></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="co"># Get the top 5 USPTO tech main classes for the top 10 companies</span></span>
<span id="cb5-21"><a href="#cb5-21"></a>top_10_company_ids <span class="ot">&lt;-</span> top_10_companies<span class="sc">$</span>organization</span>
<span id="cb5-22"><a href="#cb5-22"></a>top_5_main_classes <span class="ot">&lt;-</span> merged_dt[organization <span class="sc">%in%</span> top_10_company_ids, .N, by <span class="ot">=</span> mainclass_id][<span class="fu">order</span>(<span class="sc">-</span>N)][<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb5-23"><a href="#cb5-23"></a></span>
<span id="cb5-24"><a href="#cb5-24"></a><span class="co"># Print the results</span></span>
<span id="cb5-25"><a href="#cb5-25"></a>most_innovative_tech_sector <span class="ot">&lt;-</span> top_5_main_classes<span class="sc">$</span>mainclass_id</span>
<span id="cb5-26"><a href="#cb5-26"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Most innovative tech sectors are: "</span>, most_innovative_tech_sector))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>#&gt; [1] "Most innovative tech sectors are:  257"
#&gt; [2] "Most innovative tech sectors are:  455"
#&gt; [3] "Most innovative tech sectors are:  370"
#&gt; [4] "Most innovative tech sectors are:  348"
#&gt; [5] "Most innovative tech sectors are:  709"</code></pre>
</div>
</div>


</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'alternate';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>